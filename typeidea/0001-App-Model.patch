From 7f61b6bd89fe5fcd177a1a2af404cdc29d045b94 Mon Sep 17 00:00:00 2001
From: chen <1193496683@qq.com>
Date: Wed, 19 Jun 2019 11:53:44 +0800
Subject: [PATCH] =?UTF-8?q?=E5=AE=8C=E6=88=90App=E5=92=8CModel=E4=BB=A3?=
 =?UTF-8?q?=E7=A0=81=E7=9A=84=E5=88=9B=E5=BB=BA?=
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

---
 typeidea/blog/__init__.py                   |  0
 typeidea/blog/admin.py                      |  3 +
 typeidea/blog/apps.py                       |  5 ++
 typeidea/blog/migrations/0001_initial.py    | 70 +++++++++++++++++++++
 typeidea/blog/migrations/__init__.py        |  0
 typeidea/blog/models.py                     | 63 +++++++++++++++++++
 typeidea/blog/tests.py                      |  3 +
 typeidea/blog/views.py                      |  3 +
 typeidea/comment/__init__.py                |  0
 typeidea/comment/admin.py                   |  3 +
 typeidea/comment/apps.py                    |  5 ++
 typeidea/comment/migrations/0001_initial.py | 35 +++++++++++
 typeidea/comment/migrations/__init__.py     |  0
 typeidea/comment/models.py                  | 23 +++++++
 typeidea/comment/tests.py                   |  3 +
 typeidea/comment/views.py                   |  3 +
 typeidea/config/__init__.py                 |  0
 typeidea/config/admin.py                    |  3 +
 typeidea/config/apps.py                     |  5 ++
 typeidea/config/migrations/0001_initial.py  | 51 +++++++++++++++
 typeidea/config/migrations/__init__.py      |  0
 typeidea/config/models.py                   | 50 +++++++++++++++
 typeidea/config/tests.py                    |  3 +
 typeidea/config/views.py                    |  3 +
 typeidea/typeidea/settings/base.py          |  5 ++
 25 files changed, 339 insertions(+)
 create mode 100644 typeidea/blog/__init__.py
 create mode 100644 typeidea/blog/admin.py
 create mode 100644 typeidea/blog/apps.py
 create mode 100644 typeidea/blog/migrations/0001_initial.py
 create mode 100644 typeidea/blog/migrations/__init__.py
 create mode 100644 typeidea/blog/models.py
 create mode 100644 typeidea/blog/tests.py
 create mode 100644 typeidea/blog/views.py
 create mode 100644 typeidea/comment/__init__.py
 create mode 100644 typeidea/comment/admin.py
 create mode 100644 typeidea/comment/apps.py
 create mode 100644 typeidea/comment/migrations/0001_initial.py
 create mode 100644 typeidea/comment/migrations/__init__.py
 create mode 100644 typeidea/comment/models.py
 create mode 100644 typeidea/comment/tests.py
 create mode 100644 typeidea/comment/views.py
 create mode 100644 typeidea/config/__init__.py
 create mode 100644 typeidea/config/admin.py
 create mode 100644 typeidea/config/apps.py
 create mode 100644 typeidea/config/migrations/0001_initial.py
 create mode 100644 typeidea/config/migrations/__init__.py
 create mode 100644 typeidea/config/models.py
 create mode 100644 typeidea/config/tests.py
 create mode 100644 typeidea/config/views.py

diff --git a/typeidea/blog/__init__.py b/typeidea/blog/__init__.py
new file mode 100644
index 0000000..e69de29
diff --git a/typeidea/blog/admin.py b/typeidea/blog/admin.py
new file mode 100644
index 0000000..8c38f3f
--- /dev/null
+++ b/typeidea/blog/admin.py
@@ -0,0 +1,3 @@
+from django.contrib import admin
+
+# Register your models here.
diff --git a/typeidea/blog/apps.py b/typeidea/blog/apps.py
new file mode 100644
index 0000000..7930587
--- /dev/null
+++ b/typeidea/blog/apps.py
@@ -0,0 +1,5 @@
+from django.apps import AppConfig
+
+
+class BlogConfig(AppConfig):
+    name = 'blog'
diff --git a/typeidea/blog/migrations/0001_initial.py b/typeidea/blog/migrations/0001_initial.py
new file mode 100644
index 0000000..b60a358
--- /dev/null
+++ b/typeidea/blog/migrations/0001_initial.py
@@ -0,0 +1,70 @@
+# -*- coding: utf-8 -*-
+# Generated by Django 1.11.21 on 2019-06-19 03:11
+from __future__ import unicode_literals
+
+from django.conf import settings
+from django.db import migrations, models
+import django.db.models.deletion
+
+
+class Migration(migrations.Migration):
+
+    initial = True
+
+    dependencies = [
+        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
+    ]
+
+    operations = [
+        migrations.CreateModel(
+            name='Category',
+            fields=[
+                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('name', models.CharField(max_length=50, verbose_name='名称')),
+                ('status', models.PositiveIntegerField(choices=[(1, '正常'), (0, '删除')], default=1, verbose_name='状态')),
+                ('is_nav', models.BooleanField(default=False, verbose_name='是否为导航')),
+                ('create_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
+                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='作者')),
+            ],
+            options={
+                'verbose_name': '分类',
+                'verbose_name_plural': '分类',
+            },
+        ),
+        migrations.CreateModel(
+            name='Post',
+            fields=[
+                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('title', models.CharField(max_length=255, verbose_name='标题')),
+                ('desc', models.CharField(blank=True, max_length=1024, verbose_name='摘要')),
+                ('content', models.TextField(help_text='正文必须为MarkDown格式', verbose_name='正文')),
+                ('status', models.PositiveIntegerField(choices=[(1, '正常'), (0, '删除'), (2, '草稿')], default=1, verbose_name='状态')),
+                ('create_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
+                ('category', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='blog.Category', verbose_name='分类')),
+                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='作者')),
+            ],
+            options={
+                'verbose_name': '文章',
+                'verbose_name_plural': '文章',
+                'ordering': ['-id'],
+            },
+        ),
+        migrations.CreateModel(
+            name='Tag',
+            fields=[
+                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('name', models.CharField(max_length=10, verbose_name='名称')),
+                ('status', models.PositiveIntegerField(choices=[(1, '正常'), (0, '删除')], default=1, verbose_name='状态')),
+                ('owner', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
+            ],
+            options={
+                'verbose_name': '标签',
+                'verbose_name_plural': '标签',
+            },
+        ),
+        migrations.AddField(
+            model_name='post',
+            name='tag',
+            field=models.ManyToManyField(to='blog.Tag', verbose_name='标签'),
+        ),
+    ]
diff --git a/typeidea/blog/migrations/__init__.py b/typeidea/blog/migrations/__init__.py
new file mode 100644
index 0000000..e69de29
diff --git a/typeidea/blog/models.py b/typeidea/blog/models.py
new file mode 100644
index 0000000..f1897a6
--- /dev/null
+++ b/typeidea/blog/models.py
@@ -0,0 +1,63 @@
+from django.db import models
+from django.contrib.auth.models import User
+# Create your models here.
+
+
+class Category(models.Model):
+    STATUS_NORMAL = 1
+    STATUS_DELETE = 0
+    STATUS_ITEMS = (
+        (STATUS_NORMAL,'正常'),
+        (STATUS_DELETE,'删除'),
+    )
+
+    name = models.CharField(max_length=50,verbose_name='名称')
+    status = models.PositiveIntegerField(default=STATUS_NORMAL,choices=STATUS_ITEMS,verbose_name='状态')
+    is_nav = models.BooleanField(default=False,verbose_name='是否为导航')
+    owner = models.ForeignKey(User,verbose_name='作者')
+    create_time = models.DateTimeField(auto_now_add=True,verbose_name='创建时间')
+
+    class Meta:
+        verbose_name = '分类'
+        verbose_name_plural = '分类'
+
+
+class Tag(models.Model):
+    STATUS_NORMAL = 1
+    STATUS_DELETE = 0
+    STATUS_ITEMS = (
+        (STATUS_NORMAL,'正常'),
+        (STATUS_DELETE,'删除'),
+    )
+
+    name = models.CharField(max_length=10,verbose_name='名称')
+    status = models.PositiveIntegerField(default=STATUS_NORMAL,choices=STATUS_ITEMS,verbose_name='状态')
+    owner = models.DateTimeField(auto_now_add=True,verbose_name='创建时间')
+
+    class Meta:
+        verbose_name_plural = verbose_name = '标签'
+
+
+class Post(models.Model):
+    STATUS_NORMAL = 1
+    STATUS_DELETE = 0
+    STATUS_DRAFT = 2
+    STATUS_ITEMS = (
+        (STATUS_NORMAL, '正常'),
+        (STATUS_DELETE, '删除'),
+        (STATUS_DRAFT,'草稿'),
+    )
+
+    title = models.CharField(max_length=255,verbose_name='标题')
+    desc = models.CharField(max_length=1024,blank=True,verbose_name='摘要')
+    content = models.TextField(verbose_name='正文',help_text='正文必须为MarkDown格式')
+    status = models.PositiveIntegerField(default=STATUS_NORMAL,choices=STATUS_ITEMS,verbose_name='状态')
+    category = models.ForeignKey(Category,verbose_name='分类')
+    tag = models.ManyToManyField(Tag,verbose_name='标签')
+    owner = models.ForeignKey(User,verbose_name='作者')
+    create_time = models.DateTimeField(auto_now_add=True,verbose_name='创建时间')
+
+    class Meta:
+        verbose_name = verbose_name_plural = '文章'
+        ordering = ['-id']  #根据id进行降序排列
+
diff --git a/typeidea/blog/tests.py b/typeidea/blog/tests.py
new file mode 100644
index 0000000..7ce503c
--- /dev/null
+++ b/typeidea/blog/tests.py
@@ -0,0 +1,3 @@
+from django.test import TestCase
+
+# Create your tests here.
diff --git a/typeidea/blog/views.py b/typeidea/blog/views.py
new file mode 100644
index 0000000..91ea44a
--- /dev/null
+++ b/typeidea/blog/views.py
@@ -0,0 +1,3 @@
+from django.shortcuts import render
+
+# Create your views here.
diff --git a/typeidea/comment/__init__.py b/typeidea/comment/__init__.py
new file mode 100644
index 0000000..e69de29
diff --git a/typeidea/comment/admin.py b/typeidea/comment/admin.py
new file mode 100644
index 0000000..8c38f3f
--- /dev/null
+++ b/typeidea/comment/admin.py
@@ -0,0 +1,3 @@
+from django.contrib import admin
+
+# Register your models here.
diff --git a/typeidea/comment/apps.py b/typeidea/comment/apps.py
new file mode 100644
index 0000000..7e43ba0
--- /dev/null
+++ b/typeidea/comment/apps.py
@@ -0,0 +1,5 @@
+from django.apps import AppConfig
+
+
+class CommentConfig(AppConfig):
+    name = 'comment'
diff --git a/typeidea/comment/migrations/0001_initial.py b/typeidea/comment/migrations/0001_initial.py
new file mode 100644
index 0000000..8f5cb52
--- /dev/null
+++ b/typeidea/comment/migrations/0001_initial.py
@@ -0,0 +1,35 @@
+# -*- coding: utf-8 -*-
+# Generated by Django 1.11.21 on 2019-06-19 03:11
+from __future__ import unicode_literals
+
+from django.db import migrations, models
+import django.db.models.deletion
+
+
+class Migration(migrations.Migration):
+
+    initial = True
+
+    dependencies = [
+        ('blog', '0001_initial'),
+    ]
+
+    operations = [
+        migrations.CreateModel(
+            name='Comment',
+            fields=[
+                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('content', models.CharField(max_length=2048, verbose_name='内容')),
+                ('nickname', models.CharField(max_length=50, verbose_name='昵称')),
+                ('website', models.URLField(verbose_name='网站')),
+                ('email', models.EmailField(max_length=254, verbose_name='邮箱')),
+                ('status', models.PositiveIntegerField(choices=[(1, '正常'), (0, '删除')], default=1, verbose_name='状态')),
+                ('create_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
+                ('target', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='blog.Post', verbose_name='评论目标')),
+            ],
+            options={
+                'verbose_name': '评论',
+                'verbose_name_plural': '评论',
+            },
+        ),
+    ]
diff --git a/typeidea/comment/migrations/__init__.py b/typeidea/comment/migrations/__init__.py
new file mode 100644
index 0000000..e69de29
diff --git a/typeidea/comment/models.py b/typeidea/comment/models.py
new file mode 100644
index 0000000..9df0ece
--- /dev/null
+++ b/typeidea/comment/models.py
@@ -0,0 +1,23 @@
+from django.db import models
+
+from blog.models import Post
+# Create your models here.
+
+
+class Comment(models.Model):
+    STATUS_NORMAL = 1
+    STATUS_DELETE = 0
+    STATUS_ITEMS = (
+        (STATUS_NORMAL,'正常'),
+        (STATUS_DELETE,'删除'),
+    )
+    target = models.ForeignKey(Post,verbose_name='评论目标')
+    content = models.CharField(max_length=2048,verbose_name='内容')
+    nickname = models.CharField(max_length=50,verbose_name="昵称")
+    website = models.URLField(verbose_name='网站')
+    email = models.EmailField(verbose_name="邮箱")
+    status = models.PositiveIntegerField(default=STATUS_NORMAL,choices=STATUS_ITEMS,verbose_name='状态')
+    create_time = models.DateTimeField(auto_now_add=True,verbose_name='创建时间')
+
+    class Meta:
+        verbose_name = verbose_name_plural = '评论'
\ No newline at end of file
diff --git a/typeidea/comment/tests.py b/typeidea/comment/tests.py
new file mode 100644
index 0000000..7ce503c
--- /dev/null
+++ b/typeidea/comment/tests.py
@@ -0,0 +1,3 @@
+from django.test import TestCase
+
+# Create your tests here.
diff --git a/typeidea/comment/views.py b/typeidea/comment/views.py
new file mode 100644
index 0000000..91ea44a
--- /dev/null
+++ b/typeidea/comment/views.py
@@ -0,0 +1,3 @@
+from django.shortcuts import render
+
+# Create your views here.
diff --git a/typeidea/config/__init__.py b/typeidea/config/__init__.py
new file mode 100644
index 0000000..e69de29
diff --git a/typeidea/config/admin.py b/typeidea/config/admin.py
new file mode 100644
index 0000000..8c38f3f
--- /dev/null
+++ b/typeidea/config/admin.py
@@ -0,0 +1,3 @@
+from django.contrib import admin
+
+# Register your models here.
diff --git a/typeidea/config/apps.py b/typeidea/config/apps.py
new file mode 100644
index 0000000..8d9481b
--- /dev/null
+++ b/typeidea/config/apps.py
@@ -0,0 +1,5 @@
+from django.apps import AppConfig
+
+
+class ConfigConfig(AppConfig):
+    name = 'config'
diff --git a/typeidea/config/migrations/0001_initial.py b/typeidea/config/migrations/0001_initial.py
new file mode 100644
index 0000000..f92ee21
--- /dev/null
+++ b/typeidea/config/migrations/0001_initial.py
@@ -0,0 +1,51 @@
+# -*- coding: utf-8 -*-
+# Generated by Django 1.11.21 on 2019-06-19 03:11
+from __future__ import unicode_literals
+
+from django.conf import settings
+from django.db import migrations, models
+import django.db.models.deletion
+
+
+class Migration(migrations.Migration):
+
+    initial = True
+
+    dependencies = [
+        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
+    ]
+
+    operations = [
+        migrations.CreateModel(
+            name='Link',
+            fields=[
+                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('title', models.CharField(max_length=50, verbose_name='标题')),
+                ('href', models.URLField(verbose_name='链接')),
+                ('status', models.PositiveIntegerField(choices=[(1, '正常'), (0, '删除')], default=1, verbose_name='状态')),
+                ('weight', models.PositiveIntegerField(choices=[(1, 1), (2, 2), (3, 3), (4, 4), (5, 5)], default=1, help_text='权重高展示顺序靠前', verbose_name='权重')),
+                ('create_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
+                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='作者')),
+            ],
+            options={
+                'verbose_name': '友链',
+                'verbose_name_plural': '友链',
+            },
+        ),
+        migrations.CreateModel(
+            name='SideBar',
+            fields=[
+                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
+                ('title', models.CharField(max_length=50, verbose_name='标题')),
+                ('display_type', models.PositiveIntegerField(choices=[(1, 'HTML'), (2, '最新文章'), (3, '最热文章'), (4, '最近评论')], default=1, verbose_name='展示类型')),
+                ('content', models.CharField(blank=True, help_text='如果设置的不是HTML类型，可为空', max_length=500, verbose_name='内容')),
+                ('status', models.PositiveIntegerField(choices=[(1, '展示'), (0, '隐藏')], default=1, verbose_name='状态')),
+                ('create_time', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
+                ('owner', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='作者')),
+            ],
+            options={
+                'verbose_name': '侧边栏',
+                'verbose_name_plural': '侧边栏',
+            },
+        ),
+    ]
diff --git a/typeidea/config/migrations/__init__.py b/typeidea/config/migrations/__init__.py
new file mode 100644
index 0000000..e69de29
diff --git a/typeidea/config/models.py b/typeidea/config/models.py
new file mode 100644
index 0000000..7ace6c2
--- /dev/null
+++ b/typeidea/config/models.py
@@ -0,0 +1,50 @@
+from django.db import models
+from django.contrib.auth.models import User
+# Create your models here.
+
+
+class Link(models.Model):
+    STATUS_NORMAL = 1
+    STATUS_DELETE = 0
+    STATUS_ITEMS = (
+        (STATUS_NORMAL, '正常'),
+        (STATUS_DELETE, '删除'),
+    )
+    title = models.CharField(max_length=50,verbose_name='标题')
+    href = models.URLField(verbose_name='链接')   #默认长度为200
+    status = models.PositiveIntegerField(default=STATUS_NORMAL,choices=STATUS_ITEMS,verbose_name='状态')
+    weight = models.PositiveIntegerField(default=1,choices=zip(range(1,6),
+                                         range(1,6)),verbose_name='权重',help_text='权重高展示顺序靠前')
+
+    owner = models.ForeignKey(User,verbose_name='作者')
+    create_time = models.DateTimeField(auto_now_add=True,verbose_name='创建时间')
+
+    class Meta:
+        verbose_name = verbose_name_plural = '友链'
+
+
+class SideBar(models.Model):
+    STATUS_SHOW = 1
+    STATUS_HIDE = 0
+    STATUS_ITEMS = (
+        (STATUS_SHOW,'展示'),
+        (STATUS_HIDE,'隐藏'),
+    )
+    SIDE_TYPE = (
+        (1,'HTML'),
+        (2,'最新文章'),
+        (3,'最热文章'),
+        (4,'最近评论'),
+    )
+    title = models.CharField(max_length=50,verbose_name='标题')
+    display_type = models.PositiveIntegerField(default=1,choices=SIDE_TYPE,verbose_name='展示类型')
+    content = models.CharField(max_length=500,blank=True,verbose_name='内容',
+                               help_text='如果设置的不是HTML类型，可为空')
+
+    status = models.PositiveIntegerField(default=STATUS_SHOW,choices=STATUS_ITEMS,verbose_name='状态')
+    owner = models.ForeignKey(User,verbose_name='作者')
+    create_time = models.DateTimeField(auto_now_add=True,verbose_name='创建时间')
+
+    class Meta:
+        verbose_name = verbose_name_plural = '侧边栏'
+
diff --git a/typeidea/config/tests.py b/typeidea/config/tests.py
new file mode 100644
index 0000000..7ce503c
--- /dev/null
+++ b/typeidea/config/tests.py
@@ -0,0 +1,3 @@
+from django.test import TestCase
+
+# Create your tests here.
diff --git a/typeidea/config/views.py b/typeidea/config/views.py
new file mode 100644
index 0000000..91ea44a
--- /dev/null
+++ b/typeidea/config/views.py
@@ -0,0 +1,3 @@
+from django.shortcuts import render
+
+# Create your views here.
diff --git a/typeidea/typeidea/settings/base.py b/typeidea/typeidea/settings/base.py
index 89f6758..6253ad0 100644
--- a/typeidea/typeidea/settings/base.py
+++ b/typeidea/typeidea/settings/base.py
@@ -30,12 +30,17 @@ ALLOWED_HOSTS = []
 # Application definition
 
 INSTALLED_APPS = [
+    'blog',
+    'config',
+    'comment',
+
     'django.contrib.admin',
     'django.contrib.auth',
     'django.contrib.contenttypes',
     'django.contrib.sessions',
     'django.contrib.messages',
     'django.contrib.staticfiles',
+
 ]
 
 MIDDLEWARE = [
-- 
2.17.1

